local Players = game:GetService("Players") local DataStoreService = game:GetService("DataStoreService") local DataStore = DataStoreService:GetDataStore("SaveLeaderstats")  Players.PlayerAdded:Connect(function(player)  local data  local success, errorMessage = pcall(function()   data = DataStore:GetAsync(tostring(player.UserId))  end)   if success then   if data then    for key, value in pairs(data) do     player:WaitForChild("leaderstats"):WaitForChild(key).Value = value    end   end  else   error(errorMessage)  end end)  local function SavePlayerData(player)  local playerData = {}  for _, stat in pairs(player.leaderstats:GetChildren()) do   playerData[stat.Name] = stat.Value  end   local success, errorMessage = pcall(function()   DataStore:SetAsync(tostring(player.UserId), playerData)  end)   if not success then   error(errorMessage)  end end  Players.PlayerRemoving:Connect(SavePlayerData)  game:BindToClose(function()  for _, player in pairs(Players:GetPlayers()) do   SavePlayerData(player)  end end)
